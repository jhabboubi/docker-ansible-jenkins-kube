---
- hosts: all
  become: true
  tasks:
  - name: apt update
    command: apt update
  - name: apt install
    command: apt install software-properties-common
  - name: conntrack install
    command: apt install conntrack
  - name: Install Minikube 
    command: [wget https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64, cp minikube-linux-amd64 /usr/local/bin/minikube, chmod 755 /usr/local/bin/minikube]
  - name: Install kubectl
    command: [curl -LO https://storage.googleapis.com/kubernetes-release/release/`curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt`/bin/linux/amd64/kubectl, chmod +x ./kubectl, mv ./kubectl /usr/local/bin/kubectl]   

  - name: Start minikube
    command: minikube start
  - name: run Kubernetes
    command: kubectl apply -f Kubernetes.yaml
